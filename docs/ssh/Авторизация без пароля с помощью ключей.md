---
sidebar_position: 1
---

# Авторизация без пароля с помощью ssh-ключей

Один раз на своем компе генерируем пару ключей: открытый и закрытый. Открытый прописывается на сервере. Все. При подключении, сервер проверит ключ и откроет доступ без пароля.

:::info Важная информация для windows пользователей
В данной статье приведены примеры команд из среды bash, используемой в системах Unix (MacOS и Linux). Для Windows рекомендуется скачать коммандную строку git-bash (идет с установочником гита), которая эмулирует среду bash в Windows и поддерживает большинство команд Unix.
:::

## Генерация ключей

Чтобы сгенерировать в ключи, нужно в терминале прописать следующую команду

```sh title="Генерация ключей"
ssh-keygen -t rsa -b 4096 -C "комментарий для понимания чей этот ключ, например email"
```

После этого должны создаться 2 файла `~/.ssh/id_rsa` и `~/.ssh/id_rsa.pub` (Если при генерации не меняли название ключей и путь к ним).

Для Windows `C://Users/Пользователь/.ssh/id_rsa` и `C://Users/Пользователь/.ssh/id_rsa.pub`.

## Добавление публичного ключа на сервер

Публичный ключ находится в файле `id_rsa.pub`. Можно воспользоваться командой для быстрого просмотра через терминал.

```sh title="Показать содержимое ключа"
cat ~/.ssh/id_rsa.pub
```

Далее нужно добавить его на сервер. Для этого нужно в файле на сервере `/home/<имя_ssh_пользователя>/.ssh/authorized_keys` дописать в конец с новой строки свой публичный ключ.
Если ключ нужно разместить не на сервере, а на сервисе, то обычно они предоставляют интерфейс для добавления публичного ключа (Например на github: https://github.com/settings/keys).

Все. Пробуем авторизоваться. Если сервер требует пароль, значит что-то сделано не так.

## Если не заработало

Возможно отключен ssh-агент на компьютере.

```sh title="Запуск ssh агента"
eval `ssh-agent -s`
```

```sh title="Добавляем закрытый ключ агенту"
ssh-add ~/.ssh/id_rsa
```

```sh title="Посмотреть список ключей на агенте"
ssh-add -l
```